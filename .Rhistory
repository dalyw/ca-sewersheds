# Load required libraries
library(tidyverse)
source("step1_parameter_categorization.R")
plot_pie_counts(ref_parameter_df, 'REF_Parameter Categories')
plot_pie_counts(ir_parameter_df, 'ir_parameter_df Categories')
plot_pie_counts(esmr_parameter_df, 'esmr_parameter_df Categories')
dmr_params_df <- data.frame(PARAMETER_CODE = unique_parameter_codes) %>%
left_join(
ref_parameter_df %>%
select(PARAMETER_CODE, PARAMETER_DESC, POLLUTANT_CODE, PARENT_CATEGORY, SUB_CATEGORY) %>%
mutate(POLLUTANT_CODE = as.integer(POLLUTANT_CODE)),
by = "PARAMETER_CODE"
)
if (save) {
esmr_data <- read_esmr(save = FALSE, load = TRUE)
esmr_params_df <- data.frame(PARAMETER_DESC = unique(esmr_data$parameter)) %>%
left_join(
dmr_params_df %>% select(PARAMETER_DESC, PARAMETER_CODE),
by = "PARAMETER_DESC"
)
write_csv(esmr_params_df, 'processed_data/step1/esmr_unique_parameters.csv')
}
if (load) {
esmr_params_df <- read_csv('processed_data/step1/esmr_unique_parameters.csv')
}
esmr_params_df <- esmr_params_df %>%
mutate(normalized_desc = sapply(PARAMETER_DESC, normalize_param_desc))
dmr_params_df <- dmr_params_df %>%
rowwise() %>%
mutate(ESMR_PARAMETER_DESC_MATCHED = match_parameter_desc(., esmr_params_df)) %>%
ungroup()
dmr_params_df <- dmr_params_df %>%
rowwise() %>%
mutate(ESMR_PARAMETER_DESC_MATCHED = match_parameter_desc(., esmr_params_df)) %>%
ungroup()
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
source("step1_parameter_categorization.R")
getwd()
setwd("/Documents/git/ca-sewersheds")
load("~/Documents/git/ca-sewersheds/step1_parameter_categorization.R")
source("step1_parameter_categorization.R")
# converted from .ipynb files using Claude 3.5 Sonnet
# Load required libraries
library(tidyverse)
library(readr)
source('helper_functions.R')
ir_parameter_df <- read_csv('data/ir/ir_parameter_list.csv')
setwd("/Users/dalywettermark/Documents/git/ca-sewersheds")
source("step1_parameter_categorization.R")
source("step1_parameter_categorization.R")
source("step1_parameter_categorization.R")
source("step1_parameter_categorization.R")
rlang::last_trace()
source("step1_parameter_categorization.R")
source("step1_parameter_categorization.R")
